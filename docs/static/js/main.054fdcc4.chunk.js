(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{187:function(e,t,n){e.exports=n(395)},395:function(e,t,n){"use strict";n.r(t);var o,r=n(0),c=n(180),i=n.n(c),a=n(3),u=function(e){var t=e.amount,n=e.date,o=e.handleAmountChange,c=e.handleDateChange,i=e.handlePriceChange,a=e.handleSymbolChange,u=e.handleSubmit,l=e.price,s=e.symbol;return r.createElement("form",{onSubmit:u},r.createElement("div",null,"Symbol",r.createElement("br",null),r.createElement("input",{onChange:a,type:"text",value:s})),r.createElement("div",null,"Price",r.createElement("br",null),r.createElement("input",{min:"0",onChange:i,step:"0.01",type:"number",value:l})),r.createElement("div",null,"Amount",r.createElement("br",null),r.createElement("input",{min:"1",onChange:o,type:"number",value:t})),r.createElement("div",null,"Date",r.createElement("br",null),r.createElement("input",{onChange:c,type:"date",value:n})),r.createElement("div",null,r.createElement("button",{type:"submit"},"Create")))},l=n(1),s={createPosition:function(e,t,n,o){return function(r,c,i){var a=i(),u=a.auth().currentUser;if(!u)throw new Error("Trying to create position when unauthorized");var l={amount:n,date:o,price:t,symbol:e};return a.push("".concat("positions","/").concat(u.uid),l).then(function(e){var t=e.key,n=Object.assign({id:t},l);return r({payload:n,type:"portfolio/POSITION_CREATED"}),n})}}},f=function(e){return e.toISOString().slice(0,10)},d=Object(l.b)(Object(a.b)(null,s),Object(l.h)({amount:1,date:f(new Date),price:0,symbol:""},{handleAmountChange:function(){return function(e){var t=parseInt(e.target.value);return{amount:t>0?t:1}}},handleDateChange:function(){return function(e){var t=new Date(e.target.value);return{date:f(t||new Date)}}},handlePriceChange:function(){return function(e){var t=parseFloat(e.target.value);return{price:t>=0?t:0}}},handleSymbolChange:function(){return function(e){return{symbol:e.target.value.toUpperCase()}}}}),Object(l.f)({handleSubmit:function(e){var t=e.amount,n=e.createPosition,o=e.date,r=e.onCreate,c=e.price,i=e.symbol;return function(e){e.preventDefault(),n(i,c,t,o).then(function(e){r&&r(e)})}}}))(u),b=function(e){var t=e.handleHomeClick,n=e.handleOnCreate;return r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement("button",{onClick:t},"Home")),r.createElement("h1",null,"Create position"),r.createElement(d,{onCreate:n}))},m=n(18),h={navigate:function(e,t){return function(n){n({payload:{route:e,params:t},type:"app/NAVIGATE"})}}},p=function(e){return Object(l.b)(Object(a.b)(null,h),Object(l.f)(function(){var t={};return Object.keys(e).forEach(function(n){t[n]=function(t){var o=t.navigate,r=Object(m.a)(t,["navigate"]);return function(t){if("function"===typeof e[n]){var c=e[n](r,t),i=c.params,a=c.route;o(a,i)}else{var u=e[n];o(u)}}}}),t}))},g=Object(l.b)(p({handleHomeClick:"HOME",handlePositionClick:function(e,t){return{params:{position:t.id},route:"POSITION"}}}),Object(l.f)({handleOnCreate:function(e){var t=e.handlePositionClick;return function(e){t(e)}}}))(b),E=function(){return r.createElement("div",null,"Progress...")},O=function(e){return(0,e.children)({handleClick:e.handleClick,isClickable:e.isClickable,position:e.position})},v=Object(l.b)(Object(l.f)({handleClick:function(e){var t=e.onClick,n=e.position;return function(){t&&t(n)}}}),Object(l.g)(function(e){return{isClickable:!!e.onClick}}))(O),j=function(e){return(0,e.children)({logo:e.logo,logoProgress:e.logoProgress,price:e.price,quote:e.quote,quoteProgress:e.quoteProgress,symbol:e.symbol})},k=n(5),C=n(10),y=n(11),P=n(107),w=n(183),q=n(184),S=n(108),I=n.n(S),T=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://api.iextrading.com/1.0";Object(w.a)(this,e),this.url=t}return Object(q.a)(e,[{key:"getStockLogo",value:function(e){return I.a.get("".concat(this.url,"/stock/").concat(e,"/logo")).then(function(e){return e.data.url})}},{key:"getStockQuote",value:function(e){return I.a.get("".concat(this.url,"/stock/").concat(e,"/quote")).then(function(e){return e.data})}}]),e}()),D=function(e){return Object(P.createFetchResource)("stocks/quotes",e,function(e){return e.stocks.quotes},function(t,n){T.getStockQuote(e).then(function(e){return t(e)}).catch(function(e){return n(e.toString())})},{ttl:3e5})},R={fetchLogo:function(e){return Object(P.createFetchResource)("stocks/logos",e,function(e){return e.stocks.logos},function(t,n){T.getStockLogo(e).then(function(e){return t(e)}).catch(function(e){return n(e.toString())})},{ttl:6048e5})}},A=Object(l.b)(Object(a.b)(function(e){return{logos:e.stocks.logos}},R),Object(l.c)({componentDidMount:function(){var e=this.props,t=e.fetchLogo,n=e.symbol;n&&t(n)},componentDidUpdate:function(e){var t=this.props,n=t.fetchLogo,o=t.symbol;o&&o!==e.symbol&&n(o)}}),Object(l.d)(function(e){e.fetchLogo;var t=e.logos,n=e.symbol,o=Object(m.a)(e,["fetchLogo","logos","symbol"]),r=Object(C.getResourceById)(t,n);return Object(k.a)({logo:Object(y.extractData)(r),logoProgress:Object(y.isRequested)(r),symbol:n},o)})),_={fetchQuote:D},L=Object(l.b)(Object(a.b)(function(e){return{quotes:e.stocks.quotes}},_),Object(l.c)({componentDidMount:function(){var e=this.props,t=e.fetchQuote,n=e.symbol;n&&t(n)},componentDidUpdate:function(e){var t=this.props,n=t.fetchQuote,o=t.symbol;o&&o!==e.symbol&&n(o)}}),Object(l.d)(function(e){e.fetchQuote;var t=e.quotes,n=e.symbol,o=Object(m.a)(e,["fetchQuote","quotes","symbol"]),r=Object(C.getResourceById)(t,n);return Object(k.a)({quote:Object(y.extractData)(r),quoteProgress:Object(y.isRequested)(r),symbol:n},o)})),F=function(e){if(e){if(e.iexRealtimePrice)return e.iexRealtimePrice;if(e.latestPrice)return e.latestPrice}return 0},N=Object(l.b)(A,L,Object(l.g)(function(e){var t=e.quote;return{price:F(t)}}))(j),x=function(e){var t=e.children,n=e.onClick,o=e.position;return r.createElement(v,{onClick:n,position:o},function(e){var n=e.handleClick,c=e.isClickable;return r.createElement(N,{symbol:o.symbol},function(e){var r=e.logo,i=e.logoProgress,a=e.price,u=e.quote,l=e.quoteProgress;return t({handleClick:n,isClickable:c,logo:r,logoProgress:i,position:o,price:a,quote:u,quoteProgress:l})})})},Q=function(e){var t=e.onClick,n=e.positions;return r.createElement("div",null,n.map(function(e){return r.createElement(x,{key:e.id,onClick:t,position:e},function(t){var n=t.handleClick,o=t.isClickable,c=t.logo,i=t.logoProgress,a=t.price,u=t.quote,l=t.quoteProgress;return r.createElement("div",{onClick:n,style:o?{cursor:"pointer"}:{}},r.createElement("div",null,e.symbol),r.createElement("div",null,l?r.createElement(E,null):u&&r.createElement(r.Fragment,null,r.createElement("div",null,a.toFixed(2)," x ",e.amount," = ",(e.amount*a).toFixed(2)),r.createElement("div",{style:{color:u.change>=0?"green":"red"}},(100*u.changePercent).toFixed(2),"%"," ","(",(e.amount*u.change).toFixed(2),")"))),r.createElement("div",null,i?r.createElement(E,null):c&&r.createElement("img",{alt:"",src:c})))})}))},U=function(e){return(0,e.children)({value:e.value})},H=n(186),M={fetchQuote:D},W=Object(l.b)(Object(a.b)(function(e){return{quotes:e.stocks.quotes}},M),Object(l.c)({componentDidMount:function(){var e=this.props,t=e.fetchQuote;e.symbols.forEach(function(e){return t(e)})},componentDidUpdate:function(e){var t=this.props,n=t.fetchQuote,o=t.symbols;(function(e,t){if(e.length===t.length)return!0;var n=e.sort(),o=t.sort();return n.every(function(e,t){return e===o[t]})})(o,e.symbols)||o.forEach(function(e){return n(e)})}}),Object(l.d)(function(e){e.fetchQuote;var t=e.quotes,n=e.symbols,o=Object(m.a)(e,["fetchQuote","quotes","symbols"]),r=!1,c=n.map(function(e){var n=Object(C.getResourceById)(t,e);return Object(y.isRequested)(n)&&(r=!0),Object(y.extractData)(n)}).filter(function(e){return!!e});return Object(k.a)({quotes:c,quotesProgress:r,symbols:n},o)})),z=Object(l.b)(Object(l.g)(function(e){return{symbols:function(e){return Object(H.a)(new Set(e.map(function(e){return e.symbol})))}(e.positions)}}),W,Object(l.g)(function(e){var t=e.positions,n=e.quotes,o=0;return e.quotesProgress||(o=t.map(function(e){var t=e.amount,o=e.symbol,r=n.find(function(e){return e.symbol===o});return t*F(r)}).reduce(function(e,t){return e+t},0)),{value:o}}))(U),B=function(e){var t=e.handleCreatePositionClick,n=e.handlePositionClick,o=e.handleProfileClick,c=e.positions,i=e.positionsLoading;return r.createElement(r.Fragment,null,r.createElement("h1",null,"Home"),r.createElement("div",null,r.createElement("button",{onClick:t},"Create position"),r.createElement("button",{onClick:o},"Profile")),r.createElement("div",null,i?r.createElement(E,null):r.createElement(z,{positions:c},function(e){return e.value.toFixed(2)})),r.createElement("div",null,i?r.createElement(E,null):r.createElement(Q,{onClick:n,positions:c})))},G=n(6),K=Object(l.b)(Object(a.b)(function(e){return{auth:e.firebase.auth}}),Object(l.a)(function(e){var t=e.auth;return Object(G.isEmpty)(t)||!Object(G.isLoaded)(t)},l.e)),V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return Object(l.b)(K,Object(G.firebaseConnect)(function(e){var t=e.auth;return[{path:"".concat("positions","/").concat(t.uid),storeAs:"positions"}]}),Object(a.b)(function(e){return function(t){var n=t.firebase.data;return{positions:e(n.positions||{}),positionsLoading:!Object(G.isLoaded)(n.positions)}}}(e)))}(function(e){return Object.keys(e).map(function(t){return Object(k.a)({},e[t],{id:t})})}),X=Object(l.b)(p({handleCreatePositionClick:"CREATE_POSITION",handlePositionClick:function(e,t){return{params:{position:t.id},route:"POSITION"}},handleProfileClick:"PROFILE"}),V)(B),J=function(e){var t=e.handleDeleteClick,n=e.handleHomeClick,o=e.position,c=e.positionLoading;return r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement("button",{onClick:n},"Home")),r.createElement("h1",null,"Position"),r.createElement("div",null,c?r.createElement(E,null):JSON.stringify(o)),r.createElement("div",null,r.createElement("button",{onClick:t},"Delete")))},Y=function(e){return Object(l.b)(K,Object(G.firebaseConnect)(function(t){var n=t.auth,o=e(t);return[{path:"".concat("positions","/").concat(n.uid,"/").concat(o),storeAs:"".concat("positions","/").concat(o)}]}),Object(a.b)(function(e){return function(t,n){var o=t.firebase.data,r=e(n),c=o.positions&&o.positions[r];return{position:Object.assign({id:r},c),positionLoading:!Object(G.isLoaded)(c)}}}(e)))},$=Object(a.b)(function(e){return{routeParams:e.app.routeParams}}),Z={deletePosition:function(e){return function(t,n,o){if(!e)throw new Error("Trying to delete position without ID");var r=o(),c=r.auth().currentUser;if(!c)throw new Error("Trying to delete position when unauthorized");return r.remove("".concat("positions","/").concat(c.uid,"/").concat(e)).then(function(){t({payload:e,type:"portfolio/POSITION_DELETED"})})}}},ee=Object(l.b)(p({handleHomeClick:"HOME"}),$,Y(function(e){return e.routeParams.position}),Object(a.b)(null,Z),Object(l.f)({handleDeleteClick:function(e){var t=e.deletePosition,n=e.handleHomeClick,o=e.position;return function(){t(o.id).then(function(){return n()})}}}))(J),te=function(e){var t=e.children,n=e.handleClick;return r.createElement("button",{onClick:n},t)},ne=Object(l.b)(G.withFirebase,Object(l.f)({handleClick:function(e){var t=e.firebase;return function(){t.logout()}}}))(te),oe=function(e){var t=e.handleHomeClick,n=e.profile;return r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement("button",{onClick:t},"Home")),r.createElement("h1",null,"Profile"),r.createElement("div",null,n.avatarUrl&&r.createElement("img",{align:"right",alt:"Avatar",src:n.avatarUrl}),n.displayName&&r.createElement("strong",null,n.displayName),n.email&&r.createElement("em",null,n.email)),r.createElement("div",null,r.createElement(ne,null,"Logout")))},re=Object(l.b)(p({handleHomeClick:"HOME"}),Object(a.b)(function(e){return{profile:e.firebase.profile}}))(oe),ce=function(e){switch(e.route){case"CREATE_POSITION":return r.createElement(g,null);case"POSITION":return r.createElement(ee,null);case"PROFILE":return r.createElement(re,null);default:return r.createElement(X,null)}},ie=Object(a.b)(function(e){return{route:e.app.route}})(ce),ae=function(e){var t=e.children,n=e.handleClick;return r.createElement("button",{onClick:n},t)},ue=Object(l.b)(G.withFirebase,Object(l.f)({handleClick:function(e){var t=e.firebase,n=e.provider;return function(){t.login({provider:n})}}}))(ae),le=function(){return r.createElement(ue,{provider:"google"},"Sign in with Google")},se=function(){return r.createElement(r.Fragment,null,r.createElement("h1",null,"Welcome!"),r.createElement("div",null,r.createElement(le,null)))},fe=function(){return r.createElement(r.Fragment,null,r.createElement("h1",null,"Loading"),r.createElement("div",null,r.createElement(E,null)))},de=function(e){var t=e.isAuthenticated;return e.progress?r.createElement(fe,null):t?r.createElement(ie,null):r.createElement(se,null)},be={fetchQuote:D},me=Object(l.b)(Object(a.b)(function(e){return{quotes:e.stocks.quotes}},be),Object(l.c)({componentDidMount:function(){var e=this;o=setInterval(function(){var t=e.props,n=t.fetchQuote,o=t.quotes,r=[];o.allIds.forEach(function(e){var t=Object(C.getResourceById)(o,e);Object(y.isExpired)(t,3e5)&&(r.push(e),n(e))}),console.log("Stock quotes updater working, expired:",r)},3e4)},componentWillUnmount:function(){clearInterval(o)}}),Object(l.d)(function(e){e.fetchQuote,e.quotes;return Object(m.a)(e,["fetchQuote","quotes"])})),he=Object(l.b)(Object(a.b)(function(e){return{auth:e.firebase.auth}}),Object(l.g)(function(e){var t=e.auth;return{isAuthenticated:!Object(G.isEmpty)(t)&&Object(G.isLoaded)(t),progress:!Object(G.isLoaded)(t)}}),Object(l.a)(function(e){return e.isAuthenticated},me))(de),pe=n(109),ge=n.n(pe),Ee=n(20),Oe=n(185),ve={route:"HOME",routeParams:{}},je={},ke=n(44),Ce={logos:Object(C.createInitialState)(),quotes:Object(C.createInitialState)()},ye=function(e,t){if(!e&&!t)return[];if(!e)return t;var n=e.slice();return t?(t.forEach(function(e){var t=n.findIndex(function(t){return t.id===e.id});-1===t?n.push(e):n[t]=e}),n):n},Pe={brokerageAccountId:"",accessToken:"",areTokensRequested:!1,isAuthorized:!1,refreshToken:"",tokensError:"",accounts:[],diffError:"",diffServerTimestamp:0,instruments:[],isDiffRequested:!1},we=Object(Ee.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case"app/NAVIGATE":return Object(k.a)({},e,{route:n.route,routeParams:n.params?n.params:{}});default:return e}},firebase:G.firebaseReducer,portfolio:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je;switch((arguments.length>1?arguments[1]:void 0).type){case"portfolio/POSITION_CREATED":case"portfolio/POSITION_DELETED":default:return e}},stocks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;return Object(ke.isResourceAction)("stocks/logos",t)?Object(k.a)({},e,{logos:Object(ke.repositoryReducer)(e.logos,t)}):Object(ke.isResourceAction)("stocks/quotes",t)?Object(k.a)({},e,{quotes:Object(ke.repositoryReducer)(e.quotes,t)}):e},zenMoney:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case"BROKERAGE_ACCOUNT_SET":return Object(k.a)({},e,{brokerageAccountId:n});case"ACCESS_TOKEN_SET":return Object(k.a)({},e,{isAuthorized:!0});case"TOKENS_FAILED":return Object(k.a)({},e,{accessToken:"",areTokensRequested:!1,isAuthorized:!1,refreshToken:"",tokensError:n});case"TOKENS_RECEIVED":return Object(k.a)({},e,{accessToken:n.access_token,areTokensRequested:!1,refreshToken:n.refresh_token,tokensError:""});case"TOKENS_REQUESTED":return Object(k.a)({},e,{areTokensRequested:!0});case"LOGGED_OUT":return Pe;case"DIFF_FAILED":return Object(k.a)({},e,{diffError:n,isDiffRequested:!1});case"DIFF_RECEIVED":return Object(k.a)({},e,{accounts:ye(e.accounts,n.account),diffError:"",diffServerTimestamp:n.serverTimestamp,instruments:ye(e.instruments,n.instrument),isDiffRequested:!1});case"DIFF_REQUESTED":return Object(k.a)({},e,{isDiffRequested:!0});default:return e}}}),qe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Se(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Ie=document.getElementById("root"),Te=function(e){ge.a.initializeApp({apiKey:"AIzaSyAjObNGqQ8Xg9Yk6ewtQvHDti6r3jEqdP4",authDomain:"loginov-rocks-portfolio.firebaseapp.com",databaseURL:"https://loginov-rocks-portfolio.firebaseio.com",projectId:"loginov-rocks-portfolio",storageBucket:"loginov-rocks-portfolio.appspot.com",messagingSenderId:"744680231502"});var t=[Oe.a.withExtraArgument(G.getFirebase)],n=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:Ee.d)(Object(G.reactReduxFirebase)(ge.a,{userProfile:"users"}),Ee.a.apply(void 0,t));return Object(Ee.e)(e,n)}(we);i.a.render(r.createElement(a.a,{store:Te},r.createElement(he,null)),Ie),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat(".","/service-worker.js");qe?(function(e,t){fetch(e).then(function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Se(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Se(t,e)})}}()}},[[187,2,1]]]);
//# sourceMappingURL=main.054fdcc4.chunk.js.map